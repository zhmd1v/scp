/* shared chat styles */
.chat-page, .chat-thread-page {
    padding: 18px;
    font-family: Inter, Roboto, system-ui, -apple-system, "Segoe UI", "Helvetica Neue", Arial;
}

/* ChatList */
.chat-controls { display:flex; align-items:center; gap:12px; margin-bottom:12px; }
.filters button { margin-right:8px; padding:6px 10px; border-radius:6px; border:1px solid #ddd; background:white; cursor:pointer;}
.filters button.active { background:#eef2ff; border-color:#c7d2fe; }

.conversations-list { margin-top:12px; display:flex; flex-direction:column; gap:10px; }
.conversation-row { display:flex; align-items:center; justify-content:space-between; background:white; padding:10px; border-radius:8px; border:1px solid #eee; }
.conv-link { display:flex; gap:10px; text-decoration:none; color:inherit; flex:1; }
.avatar { width:44px; height:44px; border-radius:8px; background:#f3f4f6; display:flex; align-items:center; justify-content:center; font-weight:600; color:#374151; }
.conv-body { flex:1; display:flex; flex-direction:column; }
.conv-top { display:flex; justify-content:space-between; align-items:center; }
.conv-bottom { display:flex; justify-content:space-between; align-items:center; gap:12px; margin-top:6px; }
.preview { color:#6b7280; font-size:14px; }
.escalation-badge { background:#fde68a; color:#92400e; padding:4px 8px; border-radius:999px; font-size:12px; margin-right:8px; }
.unread-badge { background:#ef4444; color:white; padding:4px 8px; border-radius:999px; font-size:12px; }

/* ChatThread */
.chat-header { display:flex; align-items:center; gap:12px; margin-bottom:12px; }
.chat-header h3 { margin:0; flex:1; }
.btn-back { background:none; border:1px solid #ddd; padding:6px 8px; border-radius:6px; cursor:pointer; }
.chat-actions { display:flex; gap:8px; align-items:center; }

.messages-area { height:420px; overflow:auto; border:1px solid #e5e7eb; padding:12px; border-radius:8px; background:#fff; display:flex; flex-direction:column; gap:10px;}
.message { max-width:78%; }
.message.consumer { align-self:flex-start; }
.message.owner, .message.manager, .message.sales { align-self:flex-end; text-align:right; }
.bubble { padding:8px 12px; border-radius:8px; background:#f3f4f6; display:inline-block; }
.message.owner .bubble, .message.manager .bubble { background:#dcfce7; }
.bubble-product { background:#fff7ed; border:1px dashed #fde68a; }
.bubble-attachment img.attachment-img { max-width:240px; border-radius:6px; display:block; }
.bubble-system { background:#eef2ff; color:#3730a3; font-style:italic; }

.composer { margin-top:12px; }
.composer-row { display:flex; gap:8px; }
.composer-row input[type="text"] { flex:1; padding:8px; border-radius:6px; border:1px solid #ddd; }
.composer-row input[type="file"] { padding:6px; }
.btn-send { background:#2563eb; color:white; padding:8px 12px; border-radius:6px; border:none; cursor:pointer; }
.btn-small { padding:6px 8px; border-radius:6px; border:1px solid #ddd; background:white; cursor:pointer; }
.notice { padding:8px; background:#fff4e6; border-radius:6px; border:1px solid #fde68a; color:#92400e; }

.attachment-preview { margin-top:8px; font-size:14px; color:#374151; }

/* small responsive tweaks */
@media (max-width: 800px) {
    .messages-area { height:60vh; }
}

.attach-btn {
    position: relative;
    cursor: pointer;
    display: flex;
    align-items: center;
}

.attach-btn input[type="file"] {
    display: none;
}

.attach-icon {
    width: 22px;
    height: 22px;
    opacity: 0.85;
    transition: 0.2s ease;
}

.attach-btn:hover .attach-icon {
    opacity: 1;
    transform: scale(1.05);
}

/* Image preview before sending */
.image-preview-bar {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 8px 0;
    padding: 6px;
    background: #f4f4f4;
    border-radius: 8px;
}

.preview-img {
    max-width: 120px;
    max-height: 120px;
    border-radius: 6px;
}

.remove-preview {
    background: #d33;
    border: none;
    color: white;
    padding: 4px 8px;
    border-radius: 6px;
    cursor: pointer;
}

/* Attachments inside messages */
.attachment-img {
    max-width: 240px;
    max-height: 240px;
    border-radius: 8px;
    object-fit: cover;
    cursor: pointer;
}
